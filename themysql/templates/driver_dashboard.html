{% extends "layout.html" %}
{% block body %}
<h3>司机仪表盘</h3>
<p>司机：{{ driver.name if driver else current_user.name }}</p>

<table class="table table-sm">
  <thead>
    <tr><th>ID</th><th>客户</th><th>车型</th><th>计划开始</th><th>计划结束</th><th>实际开始</th><th>实际结束</th><th>实际里程</th><th>耗油</th><th>状态</th></tr>
  </thead>
  <tbody>
    {% for t in tasks %}
      <tr>
        <td>{{ t.id }}</td>
        <td>{{ t.client_name }}</td>
        <td>{{ t.need_vehicle_type }}</td>
        <td>{{ t.plan_start_time.strftime('%Y-%m-%d %H:%M:%S') if t.plan_start_time else '' }}</td>
        <td>{{ t.plan_end_time.strftime('%Y-%m-%d %H:%M:%S') if t.plan_end_time else '' }}</td>
        <td>{{ t.real_start_time.strftime('%Y-%m-%d %H:%M:%S') if t.real_start_time else '' }}</td>
        <td>{{ t.real_end_time.strftime('%Y-%m-%d %H:%M:%S') if t.real_end_time else '' }}</td>
        <td>{{ '%.2f'|format(t.real_mileage) if t.real_mileage is not none else '' }}</td>
        <td>{{ '%.2f'|format(t.fuel_used) if t.fuel_used is not none else '' }}</td>
        <td>{{ t.status }}</td>
      </tr>
    {% else %}
      <tr><td colspan="10" class="text-center">暂无任务</td></tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}